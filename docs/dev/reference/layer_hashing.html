<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>A preprocessing layer which hashes and bins categorical features. — layer_hashing • keras3</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="A preprocessing layer which hashes and bins categorical features. — layer_hashing"><meta name="description" content="This layer transforms categorical inputs to hashed output. It element-wise
converts a ints or strings to ints in a fixed range. The stable hash
function uses tensorflow::ops::Fingerprint to produce the same output
consistently across all platforms.
This layer uses FarmHash64 by default,
which provides a consistent hashed output across different platforms and is
stable across invocations, regardless of device and context, by mixing the
input bits thoroughly.
If you want to obfuscate the hashed output, you can also pass a random
salt argument in the constructor. In that case, the layer will use the
SipHash64 hash function, with
the salt value serving as additional input to the hash function.
Note: This layer internally uses TensorFlow. It cannot
be used as part of the compiled computation graph of a model with
any backend other than TensorFlow.
It can however be used with any backend when running eagerly.
It can also always be used as part of an input preprocessing pipeline
with any backend (outside the model itself), which is how we recommend
to use this layer.
Note: This layer is safe to use inside a tf.data pipeline
(independently of which backend you're using).
Example (FarmHash64)
layer &amp;lt;- layer_hashing(num_bins = 3)
inp &amp;lt;- c('A', 'B', 'C', 'D', 'E') |&amp;gt; array(dim = c(5, 1))
layer(inp)

## tf.Tensor(
## [[1]
##  [0]
##  [1]
##  [1]
##  [2]], shape=(5, 1), dtype=int64)


Example (FarmHash64) with a mask value
layer &amp;lt;- layer_hashing(num_bins=3, mask_value='')
inp &amp;lt;- c('A', 'B', '', 'C', 'D') |&amp;gt; array(dim = c(5, 1))
layer(inp)

## tf.Tensor(
## [[1]
##  [1]
##  [0]
##  [2]
##  [2]], shape=(5, 1), dtype=int64)


Example (SipHash64)
layer &amp;lt;- layer_hashing(num_bins=3, salt=c(133, 137))
inp &amp;lt;- c('A', 'B', 'C', 'D', 'E') |&amp;gt; array(dim = c(5, 1))
layer(inp)

## tf.Tensor(
## [[1]
##  [2]
##  [1]
##  [0]
##  [2]], shape=(5, 1), dtype=int64)


Example (Siphash64 with a single integer, same as salt=[133, 133])
layer &amp;lt;- layer_hashing(num_bins=3, salt=133)
inp &amp;lt;- c('A', 'B', 'C', 'D', 'E') |&amp;gt; array(dim = c(5, 1))
layer(inp)

## tf.Tensor(
## [[0]
##  [0]
##  [2]
##  [1]
##  [0]], shape=(5, 1), dtype=int64)

"><meta property="og:description" content="This layer transforms categorical inputs to hashed output. It element-wise
converts a ints or strings to ints in a fixed range. The stable hash
function uses tensorflow::ops::Fingerprint to produce the same output
consistently across all platforms.
This layer uses FarmHash64 by default,
which provides a consistent hashed output across different platforms and is
stable across invocations, regardless of device and context, by mixing the
input bits thoroughly.
If you want to obfuscate the hashed output, you can also pass a random
salt argument in the constructor. In that case, the layer will use the
SipHash64 hash function, with
the salt value serving as additional input to the hash function.
Note: This layer internally uses TensorFlow. It cannot
be used as part of the compiled computation graph of a model with
any backend other than TensorFlow.
It can however be used with any backend when running eagerly.
It can also always be used as part of an input preprocessing pipeline
with any backend (outside the model itself), which is how we recommend
to use this layer.
Note: This layer is safe to use inside a tf.data pipeline
(independently of which backend you're using).
Example (FarmHash64)
layer &amp;lt;- layer_hashing(num_bins = 3)
inp &amp;lt;- c('A', 'B', 'C', 'D', 'E') |&amp;gt; array(dim = c(5, 1))
layer(inp)

## tf.Tensor(
## [[1]
##  [0]
##  [1]
##  [1]
##  [2]], shape=(5, 1), dtype=int64)


Example (FarmHash64) with a mask value
layer &amp;lt;- layer_hashing(num_bins=3, mask_value='')
inp &amp;lt;- c('A', 'B', '', 'C', 'D') |&amp;gt; array(dim = c(5, 1))
layer(inp)

## tf.Tensor(
## [[1]
##  [1]
##  [0]
##  [2]
##  [2]], shape=(5, 1), dtype=int64)


Example (SipHash64)
layer &amp;lt;- layer_hashing(num_bins=3, salt=c(133, 137))
inp &amp;lt;- c('A', 'B', 'C', 'D', 'E') |&amp;gt; array(dim = c(5, 1))
layer(inp)

## tf.Tensor(
## [[1]
##  [2]
##  [1]
##  [0]
##  [2]], shape=(5, 1), dtype=int64)


Example (Siphash64 with a single integer, same as salt=[133, 133])
layer &amp;lt;- layer_hashing(num_bins=3, salt=133)
inp &amp;lt;- c('A', 'B', 'C', 'D', 'E') |&amp;gt; array(dim = c(5, 1))
layer(inp)

## tf.Tensor(
## [[0]
##  [0]
##  [2]
##  [1]
##  [0]], shape=(5, 1), dtype=int64)

"><meta name="robots" content="noindex"><!-- Google Tag Manager --><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-KHBDBW7');</script><!-- End Google Tag Manager --></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    <!-- Google Tag Manager (noscript) --> <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KHBDBW7" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript> <!-- End Google Tag Manager (noscript) -->


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="inverse" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">keras3</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">1.3.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/getting_started.html">Getting Started</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-guides" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Guides</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-guides"><li><h6 class="dropdown-header" data-toc-skip>Model definition</h6></li>
    <li><a class="dropdown-item" href="../articles/sequential_model.html">Sequential Model</a></li>
    <li><a class="dropdown-item" href="../articles/functional_api.html">Functional API</a></li>
    <li><h6 class="dropdown-header" data-toc-skip>Extending and customizing</h6></li>
    <li><a class="dropdown-item" href="../articles/training_with_built_in_methods.html">Training &amp; evaluation with the built-in methods</a></li>
    <li><a class="dropdown-item" href="../articles/custom_train_step_in_tensorflow.html">Customizing `fit()` with Tensorflow</a></li>
    <li><a class="dropdown-item" href="../articles/writing_your_own_callbacks.html">Writing your own callbacks</a></li>
    <li><a class="dropdown-item" href="../articles/making_new_layers_and_models_via_subclassing.html">Making new layers and models via subclassing</a></li>
    <li><a class="dropdown-item" href="../articles/writing_a_custom_training_loop_in_tensorflow.html">Writing a training loop from scratch in TensorFlow</a></li>
    <li><a class="dropdown-item" href="../articles/serialization_and_saving.html">Serialization and Saving</a></li>
    <li><h6 class="dropdown-header" data-toc-skip>Other topics</h6></li>
    <li><a class="dropdown-item" href="../articles/transfer_learning.html">Transfer learning and fine tuning</a></li>
    <li><a class="dropdown-item" href="../articles/distributed_training_with_tensorflow.html">Distributed training with TensorFlow</a></li>
    <li><a class="dropdown-item" href="../articles/distribution.html">Distributed training with Jax</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../articles/examples/index.html">Examples</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">News</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/rstudio/keras3/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>A preprocessing layer which hashes and bins categorical features.</h1>
      <small class="dont-index">Source: <a href="https://github.com/rstudio/keras3/blob/HEAD/R/layers-preprocessing.R" class="external-link"><code>R/layers-preprocessing.R</code></a></small>
      <div class="d-none name"><code>layer_hashing.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This layer transforms categorical inputs to hashed output. It element-wise
converts a ints or strings to ints in a fixed range. The stable hash
function uses <code>tensorflow::ops::Fingerprint</code> to produce the same output
consistently across all platforms.</p>
<p>This layer uses <a href="https://github.com/google/farmhash" class="external-link">FarmHash64</a> by default,
which provides a consistent hashed output across different platforms and is
stable across invocations, regardless of device and context, by mixing the
input bits thoroughly.</p>
<p>If you want to obfuscate the hashed output, you can also pass a random
<code>salt</code> argument in the constructor. In that case, the layer will use the
<a href="https://github.com/google/highwayhash" class="external-link">SipHash64</a> hash function, with
the <code>salt</code> value serving as additional input to the hash function.</p>
<p><strong>Note:</strong> This layer internally uses TensorFlow. It cannot
be used as part of the compiled computation graph of a model with
any backend other than TensorFlow.
It can however be used with any backend when running eagerly.
It can also always be used as part of an input preprocessing pipeline
with any backend (outside the model itself), which is how we recommend
to use this layer.</p>
<p><strong>Note:</strong> This layer is safe to use inside a <code>tf.data</code> pipeline
(independently of which backend you're using).</p>
<p><strong>Example (FarmHash64)</strong></p>
<p></p><div class="sourceCode r"><pre><code><span><span class="va">layer</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/layer_hashing.html">layer_hashing</a></span><span class="op">(</span>num_bins <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span><span class="va">inp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'A'</span>, <span class="st">'B'</span>, <span class="st">'C'</span>, <span class="st">'D'</span>, <span class="st">'E'</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/base/array.html" class="external-link">array</a></span><span class="op">(</span>dim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu">layer</span><span class="op">(</span><span class="va">inp</span><span class="op">)</span></span></code></pre><p></p></div>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="do">## tf.Tensor(</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="do">## [[1]</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="do">##  [0]</span></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="do">##  [1]</span></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="do">##  [1]</span></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a><span class="do">##  [2]], shape=(5, 1), dtype=int64)</span></span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a></span></code></pre><p></p></div>
<p><strong>Example (FarmHash64) with a mask value</strong></p>
<p></p><div class="sourceCode r"><pre><code><span><span class="va">layer</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/layer_hashing.html">layer_hashing</a></span><span class="op">(</span>num_bins<span class="op">=</span><span class="fl">3</span>, mask_value<span class="op">=</span><span class="st">''</span><span class="op">)</span></span>
<span><span class="va">inp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'A'</span>, <span class="st">'B'</span>, <span class="st">''</span>, <span class="st">'C'</span>, <span class="st">'D'</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/base/array.html" class="external-link">array</a></span><span class="op">(</span>dim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu">layer</span><span class="op">(</span><span class="va">inp</span><span class="op">)</span></span></code></pre><p></p></div>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="do">## tf.Tensor(</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="do">## [[1]</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="do">##  [1]</span></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="do">##  [0]</span></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="do">##  [2]</span></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a><span class="do">##  [2]], shape=(5, 1), dtype=int64)</span></span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a></span></code></pre><p></p></div>
<p><strong>Example (SipHash64)</strong></p>
<p></p><div class="sourceCode r"><pre><code><span><span class="va">layer</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/layer_hashing.html">layer_hashing</a></span><span class="op">(</span>num_bins<span class="op">=</span><span class="fl">3</span>, salt<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">133</span>, <span class="fl">137</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">inp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'A'</span>, <span class="st">'B'</span>, <span class="st">'C'</span>, <span class="st">'D'</span>, <span class="st">'E'</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/base/array.html" class="external-link">array</a></span><span class="op">(</span>dim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu">layer</span><span class="op">(</span><span class="va">inp</span><span class="op">)</span></span></code></pre><p></p></div>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="do">## tf.Tensor(</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="do">## [[1]</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="do">##  [2]</span></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="do">##  [1]</span></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="do">##  [0]</span></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a><span class="do">##  [2]], shape=(5, 1), dtype=int64)</span></span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a></span></code></pre><p></p></div>
<p><strong>Example (Siphash64 with a single integer, same as <code>salt=[133, 133]</code>)</strong></p>
<p></p><div class="sourceCode r"><pre><code><span><span class="va">layer</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/layer_hashing.html">layer_hashing</a></span><span class="op">(</span>num_bins<span class="op">=</span><span class="fl">3</span>, salt<span class="op">=</span><span class="fl">133</span><span class="op">)</span></span>
<span><span class="va">inp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'A'</span>, <span class="st">'B'</span>, <span class="st">'C'</span>, <span class="st">'D'</span>, <span class="st">'E'</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/base/array.html" class="external-link">array</a></span><span class="op">(</span>dim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu">layer</span><span class="op">(</span><span class="va">inp</span><span class="op">)</span></span></code></pre><p></p></div>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="do">## tf.Tensor(</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="do">## [[0]</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="do">##  [0]</span></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="do">##  [2]</span></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="do">##  [1]</span></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a><span class="do">##  [0]], shape=(5, 1), dtype=int64)</span></span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a></span></code></pre><p></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">layer_hashing</span><span class="op">(</span></span>
<span>  <span class="va">object</span>,</span>
<span>  <span class="va">num_bins</span>,</span>
<span>  mask_value <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  salt <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  output_mode <span class="op">=</span> <span class="st">"int"</span>,</span>
<span>  sparse <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-object">object<a class="anchor" aria-label="anchor" href="#arg-object"></a></dt>
<dd><p>Object to compose the layer with. A tensor, array, or sequential model.</p></dd>


<dt id="arg-num-bins">num_bins<a class="anchor" aria-label="anchor" href="#arg-num-bins"></a></dt>
<dd><p>Number of hash bins. Note that this includes the <code>mask_value</code>
bin, so the effective number of bins is <code>(num_bins - 1)</code>
if <code>mask_value</code> is set.</p></dd>


<dt id="arg-mask-value">mask_value<a class="anchor" aria-label="anchor" href="#arg-mask-value"></a></dt>
<dd><p>A value that represents masked inputs, which are mapped to
index 0. <code>NULL</code> means no mask term will be added and the
hashing will start at index 0. Defaults to <code>NULL</code>.</p></dd>


<dt id="arg-salt">salt<a class="anchor" aria-label="anchor" href="#arg-salt"></a></dt>
<dd><p>A single unsigned integer or <code>NULL</code>.
If passed, the hash function used will be SipHash64,
with these values used as an additional input
(known as a "salt" in cryptography).
These should be non-zero. If <code>NULL</code>, uses the FarmHash64 hash
function. It also supports list of 2 unsigned
integer numbers, see reference paper for details.
Defaults to <code>NULL</code>.</p></dd>


<dt id="arg-output-mode">output_mode<a class="anchor" aria-label="anchor" href="#arg-output-mode"></a></dt>
<dd><p>Specification for the output of the layer. Values can be
<code>"int"</code>, <code>"one_hot"</code>, <code>"multi_hot"</code>, or
<code>"count"</code> configuring the layer as follows:</p><ul><li><p><code>"int"</code>: Return the integer bin indices directly.</p></li>
<li><p><code>"one_hot"</code>: Encodes each individual element in the input into an
array the same size as <code>num_bins</code>, containing a 1
at the input's bin index. If the last dimension is size 1,
will encode on that dimension.
If the last dimension is not size 1, will append a new
dimension for the encoded output.</p></li>
<li><p><code>"multi_hot"</code>: Encodes each sample in the input into a
single array the same size as <code>num_bins</code>,
containing a 1 for each bin index
index present in the sample. Treats the last dimension
as the sample dimension, if input shape is
<code>(..., sample_length)</code>, output shape will be
<code>(..., num_tokens)</code>.</p></li>
<li><p><code>"count"</code>: As <code>"multi_hot"</code>, but the int array contains a count of
the number of times the bin index appeared in the sample.
Defaults to <code>"int"</code>.</p></li>
</ul></dd>


<dt id="arg-sparse">sparse<a class="anchor" aria-label="anchor" href="#arg-sparse"></a></dt>
<dd><p>Boolean. Only applicable to <code>"one_hot"</code>, <code>"multi_hot"</code>,
and <code>"count"</code> output modes. Only supported with TensorFlow
backend. If <code>TRUE</code>, returns a <code>SparseTensor</code> instead of
a dense <code>Tensor</code>. Defaults to <code>FALSE</code>.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Keyword arguments to construct a layer.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>The return value depends on the value provided for the first argument.
If  <code>object</code> is:</p><ul><li><p>a <code><a href="keras_model_sequential.html">keras_model_sequential()</a></code>, then the layer is added to the sequential model
(which is modified in place). To enable piping, the sequential model is also
returned, invisibly.</p></li>
<li><p>a <code><a href="keras_input.html">keras_input()</a></code>, then the output tensor from calling <code>layer(input)</code> is returned.</p></li>
<li><p><code>NULL</code> or missing, then a <code>Layer</code> instance is returned.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="input-shape">Input Shape<a class="anchor" aria-label="anchor" href="#input-shape"></a></h2>
    <p>A single string, a list of strings, or an <code>int32</code> or <code>int64</code> tensor
of shape <code>(batch_size, ...,)</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="output-shape">Output Shape<a class="anchor" aria-label="anchor" href="#output-shape"></a></h2>
    <p>An <code>int32</code> tensor of shape <code>(batch_size, ...)</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="reference">Reference<a class="anchor" aria-label="anchor" href="#reference"></a></h2>

<ul><li><p><a href="https://en.wikipedia.org/wiki/SipHash" class="external-link">SipHash with salt</a></p></li>
</ul></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index">
<ul><li><p><a href="https://keras.io/api/layers/preprocessing_layers/categorical/hashing#hashing-class" class="external-link">https://keras.io/api/layers/preprocessing_layers/categorical/hashing#hashing-class</a></p></li>
</ul><p>Other categorical features preprocessing layers: <br><code><a href="layer_category_encoding.html">layer_category_encoding</a>()</code> <br><code><a href="layer_hashed_crossing.html">layer_hashed_crossing</a>()</code> <br><code><a href="layer_integer_lookup.html">layer_integer_lookup</a>()</code> <br><code><a href="layer_string_lookup.html">layer_string_lookup</a>()</code> <br></p>
<p>Other preprocessing layers: <br><code><a href="layer_auto_contrast.html">layer_auto_contrast</a>()</code> <br><code><a href="layer_category_encoding.html">layer_category_encoding</a>()</code> <br><code><a href="layer_center_crop.html">layer_center_crop</a>()</code> <br><code><a href="layer_discretization.html">layer_discretization</a>()</code> <br><code><a href="layer_equalization.html">layer_equalization</a>()</code> <br><code><a href="layer_feature_space.html">layer_feature_space</a>()</code> <br><code><a href="layer_hashed_crossing.html">layer_hashed_crossing</a>()</code> <br><code><a href="layer_integer_lookup.html">layer_integer_lookup</a>()</code> <br><code><a href="layer_max_num_bounding_boxes.html">layer_max_num_bounding_boxes</a>()</code> <br><code><a href="layer_mel_spectrogram.html">layer_mel_spectrogram</a>()</code> <br><code><a href="layer_mix_up.html">layer_mix_up</a>()</code> <br><code><a href="layer_normalization.html">layer_normalization</a>()</code> <br><code><a href="layer_rand_augment.html">layer_rand_augment</a>()</code> <br><code><a href="layer_random_brightness.html">layer_random_brightness</a>()</code> <br><code><a href="layer_random_color_degeneration.html">layer_random_color_degeneration</a>()</code> <br><code><a href="layer_random_color_jitter.html">layer_random_color_jitter</a>()</code> <br><code><a href="layer_random_contrast.html">layer_random_contrast</a>()</code> <br><code><a href="layer_random_crop.html">layer_random_crop</a>()</code> <br><code><a href="layer_random_flip.html">layer_random_flip</a>()</code> <br><code><a href="layer_random_grayscale.html">layer_random_grayscale</a>()</code> <br><code><a href="layer_random_hue.html">layer_random_hue</a>()</code> <br><code><a href="layer_random_posterization.html">layer_random_posterization</a>()</code> <br><code><a href="layer_random_rotation.html">layer_random_rotation</a>()</code> <br><code><a href="layer_random_saturation.html">layer_random_saturation</a>()</code> <br><code><a href="layer_random_sharpness.html">layer_random_sharpness</a>()</code> <br><code><a href="layer_random_shear.html">layer_random_shear</a>()</code> <br><code><a href="layer_random_translation.html">layer_random_translation</a>()</code> <br><code><a href="layer_random_zoom.html">layer_random_zoom</a>()</code> <br><code><a href="layer_rescaling.html">layer_rescaling</a>()</code> <br><code><a href="layer_resizing.html">layer_resizing</a>()</code> <br><code><a href="layer_solarization.html">layer_solarization</a>()</code> <br><code><a href="layer_stft_spectrogram.html">layer_stft_spectrogram</a>()</code> <br><code><a href="layer_string_lookup.html">layer_string_lookup</a>()</code> <br><code><a href="layer_text_vectorization.html">layer_text_vectorization</a>()</code> <br></p>
<p>Other layers: <br><code><a href="Layer.html">Layer</a>()</code> <br><code><a href="layer_activation.html">layer_activation</a>()</code> <br><code><a href="layer_activation_elu.html">layer_activation_elu</a>()</code> <br><code><a href="layer_activation_leaky_relu.html">layer_activation_leaky_relu</a>()</code> <br><code><a href="layer_activation_parametric_relu.html">layer_activation_parametric_relu</a>()</code> <br><code><a href="layer_activation_relu.html">layer_activation_relu</a>()</code> <br><code><a href="layer_activation_softmax.html">layer_activation_softmax</a>()</code> <br><code><a href="layer_activity_regularization.html">layer_activity_regularization</a>()</code> <br><code><a href="layer_add.html">layer_add</a>()</code> <br><code><a href="layer_additive_attention.html">layer_additive_attention</a>()</code> <br><code><a href="layer_alpha_dropout.html">layer_alpha_dropout</a>()</code> <br><code><a href="layer_attention.html">layer_attention</a>()</code> <br><code><a href="layer_auto_contrast.html">layer_auto_contrast</a>()</code> <br><code><a href="layer_average.html">layer_average</a>()</code> <br><code><a href="layer_average_pooling_1d.html">layer_average_pooling_1d</a>()</code> <br><code><a href="layer_average_pooling_2d.html">layer_average_pooling_2d</a>()</code> <br><code><a href="layer_average_pooling_3d.html">layer_average_pooling_3d</a>()</code> <br><code><a href="layer_batch_normalization.html">layer_batch_normalization</a>()</code> <br><code><a href="layer_bidirectional.html">layer_bidirectional</a>()</code> <br><code><a href="layer_category_encoding.html">layer_category_encoding</a>()</code> <br><code><a href="layer_center_crop.html">layer_center_crop</a>()</code> <br><code><a href="layer_concatenate.html">layer_concatenate</a>()</code> <br><code><a href="layer_conv_1d.html">layer_conv_1d</a>()</code> <br><code><a href="layer_conv_1d_transpose.html">layer_conv_1d_transpose</a>()</code> <br><code><a href="layer_conv_2d.html">layer_conv_2d</a>()</code> <br><code><a href="layer_conv_2d_transpose.html">layer_conv_2d_transpose</a>()</code> <br><code><a href="layer_conv_3d.html">layer_conv_3d</a>()</code> <br><code><a href="layer_conv_3d_transpose.html">layer_conv_3d_transpose</a>()</code> <br><code><a href="layer_conv_lstm_1d.html">layer_conv_lstm_1d</a>()</code> <br><code><a href="layer_conv_lstm_2d.html">layer_conv_lstm_2d</a>()</code> <br><code><a href="layer_conv_lstm_3d.html">layer_conv_lstm_3d</a>()</code> <br><code><a href="layer_cropping_1d.html">layer_cropping_1d</a>()</code> <br><code><a href="layer_cropping_2d.html">layer_cropping_2d</a>()</code> <br><code><a href="layer_cropping_3d.html">layer_cropping_3d</a>()</code> <br><code><a href="layer_dense.html">layer_dense</a>()</code> <br><code><a href="layer_depthwise_conv_1d.html">layer_depthwise_conv_1d</a>()</code> <br><code><a href="layer_depthwise_conv_2d.html">layer_depthwise_conv_2d</a>()</code> <br><code><a href="layer_discretization.html">layer_discretization</a>()</code> <br><code><a href="layer_dot.html">layer_dot</a>()</code> <br><code><a href="layer_dropout.html">layer_dropout</a>()</code> <br><code><a href="layer_einsum_dense.html">layer_einsum_dense</a>()</code> <br><code><a href="layer_embedding.html">layer_embedding</a>()</code> <br><code><a href="layer_equalization.html">layer_equalization</a>()</code> <br><code><a href="layer_feature_space.html">layer_feature_space</a>()</code> <br><code><a href="layer_flatten.html">layer_flatten</a>()</code> <br><code><a href="layer_flax_module_wrapper.html">layer_flax_module_wrapper</a>()</code> <br><code><a href="layer_gaussian_dropout.html">layer_gaussian_dropout</a>()</code> <br><code><a href="layer_gaussian_noise.html">layer_gaussian_noise</a>()</code> <br><code><a href="layer_global_average_pooling_1d.html">layer_global_average_pooling_1d</a>()</code> <br><code><a href="layer_global_average_pooling_2d.html">layer_global_average_pooling_2d</a>()</code> <br><code><a href="layer_global_average_pooling_3d.html">layer_global_average_pooling_3d</a>()</code> <br><code><a href="layer_global_max_pooling_1d.html">layer_global_max_pooling_1d</a>()</code> <br><code><a href="layer_global_max_pooling_2d.html">layer_global_max_pooling_2d</a>()</code> <br><code><a href="layer_global_max_pooling_3d.html">layer_global_max_pooling_3d</a>()</code> <br><code><a href="layer_group_normalization.html">layer_group_normalization</a>()</code> <br><code><a href="layer_group_query_attention.html">layer_group_query_attention</a>()</code> <br><code><a href="layer_gru.html">layer_gru</a>()</code> <br><code><a href="layer_hashed_crossing.html">layer_hashed_crossing</a>()</code> <br><code><a href="layer_identity.html">layer_identity</a>()</code> <br><code><a href="layer_integer_lookup.html">layer_integer_lookup</a>()</code> <br><code><a href="layer_jax_model_wrapper.html">layer_jax_model_wrapper</a>()</code> <br><code><a href="layer_lambda.html">layer_lambda</a>()</code> <br><code><a href="layer_layer_normalization.html">layer_layer_normalization</a>()</code> <br><code><a href="layer_lstm.html">layer_lstm</a>()</code> <br><code><a href="layer_masking.html">layer_masking</a>()</code> <br><code><a href="layer_max_num_bounding_boxes.html">layer_max_num_bounding_boxes</a>()</code> <br><code><a href="layer_max_pooling_1d.html">layer_max_pooling_1d</a>()</code> <br><code><a href="layer_max_pooling_2d.html">layer_max_pooling_2d</a>()</code> <br><code><a href="layer_max_pooling_3d.html">layer_max_pooling_3d</a>()</code> <br><code><a href="layer_maximum.html">layer_maximum</a>()</code> <br><code><a href="layer_mel_spectrogram.html">layer_mel_spectrogram</a>()</code> <br><code><a href="layer_minimum.html">layer_minimum</a>()</code> <br><code><a href="layer_mix_up.html">layer_mix_up</a>()</code> <br><code><a href="layer_multi_head_attention.html">layer_multi_head_attention</a>()</code> <br><code><a href="layer_multiply.html">layer_multiply</a>()</code> <br><code><a href="layer_normalization.html">layer_normalization</a>()</code> <br><code><a href="layer_permute.html">layer_permute</a>()</code> <br><code><a href="layer_rand_augment.html">layer_rand_augment</a>()</code> <br><code><a href="layer_random_brightness.html">layer_random_brightness</a>()</code> <br><code><a href="layer_random_color_degeneration.html">layer_random_color_degeneration</a>()</code> <br><code><a href="layer_random_color_jitter.html">layer_random_color_jitter</a>()</code> <br><code><a href="layer_random_contrast.html">layer_random_contrast</a>()</code> <br><code><a href="layer_random_crop.html">layer_random_crop</a>()</code> <br><code><a href="layer_random_flip.html">layer_random_flip</a>()</code> <br><code><a href="layer_random_grayscale.html">layer_random_grayscale</a>()</code> <br><code><a href="layer_random_hue.html">layer_random_hue</a>()</code> <br><code><a href="layer_random_posterization.html">layer_random_posterization</a>()</code> <br><code><a href="layer_random_rotation.html">layer_random_rotation</a>()</code> <br><code><a href="layer_random_saturation.html">layer_random_saturation</a>()</code> <br><code><a href="layer_random_sharpness.html">layer_random_sharpness</a>()</code> <br><code><a href="layer_random_shear.html">layer_random_shear</a>()</code> <br><code><a href="layer_random_translation.html">layer_random_translation</a>()</code> <br><code><a href="layer_random_zoom.html">layer_random_zoom</a>()</code> <br><code><a href="layer_repeat_vector.html">layer_repeat_vector</a>()</code> <br><code><a href="layer_rescaling.html">layer_rescaling</a>()</code> <br><code><a href="layer_reshape.html">layer_reshape</a>()</code> <br><code><a href="layer_resizing.html">layer_resizing</a>()</code> <br><code><a href="layer_rnn.html">layer_rnn</a>()</code> <br><code><a href="layer_separable_conv_1d.html">layer_separable_conv_1d</a>()</code> <br><code><a href="layer_separable_conv_2d.html">layer_separable_conv_2d</a>()</code> <br><code><a href="layer_simple_rnn.html">layer_simple_rnn</a>()</code> <br><code><a href="layer_solarization.html">layer_solarization</a>()</code> <br><code><a href="layer_spatial_dropout_1d.html">layer_spatial_dropout_1d</a>()</code> <br><code><a href="layer_spatial_dropout_2d.html">layer_spatial_dropout_2d</a>()</code> <br><code><a href="layer_spatial_dropout_3d.html">layer_spatial_dropout_3d</a>()</code> <br><code><a href="layer_spectral_normalization.html">layer_spectral_normalization</a>()</code> <br><code><a href="layer_stft_spectrogram.html">layer_stft_spectrogram</a>()</code> <br><code><a href="layer_string_lookup.html">layer_string_lookup</a>()</code> <br><code><a href="layer_subtract.html">layer_subtract</a>()</code> <br><code><a href="layer_text_vectorization.html">layer_text_vectorization</a>()</code> <br><code><a href="layer_tfsm.html">layer_tfsm</a>()</code> <br><code><a href="layer_time_distributed.html">layer_time_distributed</a>()</code> <br><code><a href="layer_torch_module_wrapper.html">layer_torch_module_wrapper</a>()</code> <br><code><a href="layer_unit_normalization.html">layer_unit_normalization</a>()</code> <br><code><a href="layer_upsampling_1d.html">layer_upsampling_1d</a>()</code> <br><code><a href="layer_upsampling_2d.html">layer_upsampling_2d</a>()</code> <br><code><a href="layer_upsampling_3d.html">layer_upsampling_3d</a>()</code> <br><code><a href="layer_zero_padding_1d.html">layer_zero_padding_1d</a>()</code> <br><code><a href="layer_zero_padding_2d.html">layer_zero_padding_2d</a>()</code> <br><code><a href="layer_zero_padding_3d.html">layer_zero_padding_3d</a>()</code> <br><code><a href="rnn_cell_gru.html">rnn_cell_gru</a>()</code> <br><code><a href="rnn_cell_lstm.html">rnn_cell_lstm</a>()</code> <br><code><a href="rnn_cell_simple.html">rnn_cell_simple</a>()</code> <br><code><a href="rnn_cells_stack.html">rnn_cells_stack</a>()</code> <br></p></div>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Tomasz Kalinowski, JJ Allaire, François Chollet, Posit Software, PBC, Google.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

