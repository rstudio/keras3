# Resets all state generated by Keras.

Keras manages a global state, which it uses to implement the Functional
model-building API and to uniquify autogenerated layer names.

If you are creating many models in a loop, this global state will
consume an increasing amount of memory over time, and you may want to
clear it. Calling `clear_session()` releases the global state: this
helps avoid clutter from old models and layers, especially when memory
is limited.

Example 1: calling `clear_session()` when creating models in a loop

    for (i in 1:100) {
      # Without `clear_session()`, each iteration of this loop will
      # slightly increase the size of the global state managed by Keras
      model <- keras_model_sequential()
      for (j in 1:10) {
        model <- model |> layer_dense(units = 10)
      }
    }

    for (i in 1:100) {
      # With `clear_session()` called at the beginning,
      # Keras starts with a blank state at each iteration
      # and memory consumption is constant over time.
      clear_session()
      model <- keras_model_sequential()
      for (j in 1:10) {
        model <- model |> layer_dense(units = 10)
      }
    }

Example 2: resetting the layer name generation counter

    layers <- lapply(1:10, \(i) layer_dense(units = 10))

    new_layer <- layer_dense(units = 10)
    print(new_layer$name)

    ## [1] "dense_10"

    clear_session()
    new_layer <- layer_dense(units = 10)
    print(new_layer$name)

    ## [1] "dense"

## Usage

``` r
clear_session(free_memory = TRUE)
```

## Arguments

- free_memory:

  Whether to call Python garbage collection. It's usually a good
  practice to call it to make sure memory used by deleted objects is
  immediately freed. However, it may take a few seconds to execute, so
  when using `clear_session()` in a short loop, you may want to skip it.

## Value

`NULL`, invisibly, called for side effects.

## See also

- <https://keras.io/api/utils/config_utils#clearsession-function>

Other backend:  
[`config_backend()`](https://keras3.posit.co/reference/config_backend.md)  
[`config_epsilon()`](https://keras3.posit.co/reference/config_epsilon.md)  
[`config_floatx()`](https://keras3.posit.co/reference/config_floatx.md)  
[`config_image_data_format()`](https://keras3.posit.co/reference/config_image_data_format.md)  
[`config_set_epsilon()`](https://keras3.posit.co/reference/config_set_epsilon.md)  
[`config_set_floatx()`](https://keras3.posit.co/reference/config_set_floatx.md)  
[`config_set_image_data_format()`](https://keras3.posit.co/reference/config_set_image_data_format.md)  

Other utils:  
[`audio_dataset_from_directory()`](https://keras3.posit.co/reference/audio_dataset_from_directory.md)  
[`config_disable_interactive_logging()`](https://keras3.posit.co/reference/config_disable_interactive_logging.md)  
[`config_disable_traceback_filtering()`](https://keras3.posit.co/reference/config_disable_traceback_filtering.md)  
[`config_enable_interactive_logging()`](https://keras3.posit.co/reference/config_enable_interactive_logging.md)  
[`config_enable_traceback_filtering()`](https://keras3.posit.co/reference/config_enable_traceback_filtering.md)  
[`config_is_interactive_logging_enabled()`](https://keras3.posit.co/reference/config_is_interactive_logging_enabled.md)  
[`config_is_traceback_filtering_enabled()`](https://keras3.posit.co/reference/config_is_traceback_filtering_enabled.md)  
[`get_file()`](https://keras3.posit.co/reference/get_file.md)  
[`get_source_inputs()`](https://keras3.posit.co/reference/get_source_inputs.md)  
[`image_array_save()`](https://keras3.posit.co/reference/image_array_save.md)  
[`image_dataset_from_directory()`](https://keras3.posit.co/reference/image_dataset_from_directory.md)  
[`image_from_array()`](https://keras3.posit.co/reference/image_from_array.md)  
[`image_load()`](https://keras3.posit.co/reference/image_load.md)  
[`image_smart_resize()`](https://keras3.posit.co/reference/image_smart_resize.md)  
[`image_to_array()`](https://keras3.posit.co/reference/image_to_array.md)  
[`layer_feature_space()`](https://keras3.posit.co/reference/layer_feature_space.md)  
[`normalize()`](https://keras3.posit.co/reference/normalize.md)  
[`pad_sequences()`](https://keras3.posit.co/reference/pad_sequences.md)  
[`set_random_seed()`](https://keras3.posit.co/reference/set_random_seed.md)  
[`split_dataset()`](https://keras3.posit.co/reference/split_dataset.md)  
[`text_dataset_from_directory()`](https://keras3.posit.co/reference/text_dataset_from_directory.md)  
[`timeseries_dataset_from_array()`](https://keras3.posit.co/reference/timeseries_dataset_from_array.md)  
[`to_categorical()`](https://keras3.posit.co/reference/to_categorical.md)  
[`zip_lists()`](https://keras3.posit.co/reference/zip_lists.md)  
